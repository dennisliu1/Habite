<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UpRunner</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.3.6/slick.css">
    <link rel="stylesheet" type="text/css" href="/css/clippy.css" media="all">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body>

<!-- Clippy.js -->


<!-- Init script -->
<script type="text/javascript">
    
</script>

  <div class="row heading">
    <div class="columns medium-2 week-holder right">
      <h3>Week</h3><span id='week'>1</span>
    </div>
    <div class="columns medium-2 score-holder right">
      <h3>Score</h3><span id='score'>0</span>
    </div>
  </div>
  <div class="calander-slider row">  
    <!-- populated by js -->
  </div>
    
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.3.6/slick.min.js"></script>
    <script src="/js/clippy.min.js"></script>
    <script>
      $(document).foundation();
      function populateCalander(data, fn) {
        var week_count = 0;
         for (week in data) {
          var day_count = 0;  
          var week_data = data[week];
          for (day in week_data) {
            for (var i = 0 ; i < week_data[day].length ; i++) {
              $('.calander[data-weeknum='+week_count+'] .columns ul[data-daynum='+day_count+']').append('<li><input type="checkbox">'+week_data[day][i]+'</li>')
            }
            day_count++;
          } //day for
          week_count++;
         } //week for
         fn()
      }

      function addCalanders(data, fn) {
        var weeknum = 0
        for (week in data) {
          console.log('hello')
          $('.calander-slider').append('<div class="calander" data-weeknum="0"><div class="columns medium-3 end"><center><h3>Monday</h3></center><div class="line"></div><ul class="tasks" data-daynum="0"></ul></div><div class="columns medium-3 end"><center><h3>Tuesday</h3></center><div class="line"></div><ul class="tasks" data-daynum="1"></ul></div><div class="columns medium-3 end"><center><h3>Wednesday</h3></center><div class="line"></div><ul class="tasks" data-daynum="2"></ul></div><div class="columns medium-3 end"><center><h3>Thursday</h3></center><div class="line"></div><ul class="tasks" data-daynum="3"></ul></div><div class="columns medium-3 end"><center><h3>Friday</h3></center><div class="line"></div><ul class="tasks" data-daynum="4"></ul></div><div class="columns medium-3 end"><center><h3>Saturday</h3></center><div class="line"></div><ul class="tasks" data-daynum="5"></ul></div><div class="columns medium-3 end"><center><h3>Sunday</h3></center><div class="line"></div><ul class="tasks" data-daynum="6"></ul></div><div class="columns medium-3 end" style="background:#ccc"></div></div>')
        }
        
      }

      $.getJSON( "./json/running.json", function( data ) {
        addCalanders(data)
        populateCalander(data, function() {
          $('.calander-slider').slick({
            dots: true,
            arrows: true,
            infinite: false
          });
        })
        
      });

      clippy.load('Merlin', function(agent) {
        // Do anything with the loaded agent
        agent.show();
      });

      $('html').click(function() {
        //console.log($('input').length);
        var checked = 0
        var total = 0
        var current_slide = $('.calander-slider').slickCurrentSlide() + 1
        for (var i = 0 ; i < $('input').length ; i++) {
          total++;

          if ($('input')[i].checked) {
            checked++
          }
        }
        $('#week').html(current_slide)
        $('#score').html(checked)
      })


      $('.slick-next').on('click',function() {
        console.log('blah')
        canProgress($('.calander-slider').slickCurrentSlide() + 1)

      })
      function canProgress(weeknum) {
        console.log(weeknum)
      }

    </script>

    <script src="habite.js"/>
  </body>
</html>
